services:
  photoframe-orchestrator:
    image: ${PHOTOFRAME_ORCHESTRATOR_IMAGE:-edwardtoday/photoframe-orchestrator:latest}
    container_name: photoframe-orchestrator
    ports:
      - "18081:8081"
    environment:
      TZ: ${TZ:-Asia/Shanghai}
      DAILY_IMAGE_URL_TEMPLATE: ${DAILY_IMAGE_URL_TEMPLATE:-http://192.168.58.113:8000/image/480x800?date=%DATE%}
      PUBLIC_BASE_URL: ${PUBLIC_BASE_URL:-http://192.168.58.113:18081}
      DEFAULT_POLL_SECONDS: ${DEFAULT_POLL_SECONDS:-3600}
      PHOTOFRAME_TOKEN: ${PHOTOFRAME_TOKEN:-}
      DEVICE_TOKEN_MAP_JSON: ${DEVICE_TOKEN_MAP_JSON:-}
      DEVICE_TOKEN_MAP: ${DEVICE_TOKEN_MAP:-}
      PUBLIC_DAILY_BMP_TOKEN: ${PUBLIC_DAILY_BMP_TOKEN:-}
      DAILY_FETCH_TIMEOUT_SECONDS: ${DAILY_FETCH_TIMEOUT_SECONDS:-10}
    volumes:
      - ./services/photoframe-orchestrator/data:/app/data
    restart: unless-stopped
